<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>간단한 웹소켓 클라이언트</h1>
<input type="text" id="messageInput" placeholder="메시지를 입력하세요...">
<button id="sendButton">전송</button>
<div id="chatOutput" style="border: 1px solid #ccc; margin-top: 10px; padding: 5px; height: 200px; overflow-y: scroll;"></div>

<script>
    // 1. 서버 주소로 웹소켓 연결 (localhost의 8080 포트)
    const ws = new WebSocket("ws://localhost:8080");

    // 2. 연결 성공 시
    ws.onopen = () => {
        console.log("서버에 연결되었습니다.");
        document.getElementById("chatOutput").innerHTML += "<p><em>서버에 연결되었습니다.</em></p>";
    };

    // 3. 서버로부터 메시지 수신 시 (핵심)
    ws.onmessage = (event) => {
        console.log("서버로부터 받은 메시지:", event.data);
        document.getElementById("chatOutput").innerHTML += `<p>${event.data}</p>`;
    };

    // 4. '전송' 버튼 클릭 시
    document.getElementById("sendButton").onclick = () => {
        const message = document.getElementById("messageInput").value;
        ws.send(message); // 서버로 메시지 전송
        document.getElementById("messageInput").value = ""; // 입력창 비우기
    };

    // 5. 연결 종료 시
    ws.onclose = () => {
        console.log("서버와 연결이 끊겼습니다.");
        document.getElementById("chatOutput").innerHTML += "<p><em>서버와 연결이 끊겼습니다.</em></p>";
    };
</script>
</body>
</html>